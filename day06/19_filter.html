<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .item {
            display: flex;
            max-width: 1200px;
            margin: auto;
        }
        .item > div {
            flex: 2;
            border: 1px solid grey;
            padding: 5px 10px;
        }
        .item > div:nth-child(1) { flex: 5; }
        .item > div:nth-child(2) { flex: 4; }
        .columns {
            background-color: #eee;
            position: sticky;
            top: 0;
        }
    </style>
</head>
<body>

    <h1>ë¶€ì‚°ê´‘ì—­ì‹œ ì£¼ì°¨ì¥ ìš”ê¸ˆ í˜„í™©</h1>
    <hr>

    <div id="root">
        <div class="columns item">
            <div order="1" class="pkNam"><span class="text">ì£¼ì°¨ì¥ì´ë¦„</span><span class="arrow"></span></div>
            <div order="1" class="guNm"><span class="text">ì§€ì—­</span><span class="arrow"></span></div>
            <div order="1" class="pkFm"><span class="text">í˜•ì‹</span><span class="arrow"></span></div>
            <div order="1" class="tenMin"<span class="text">10ë¶„ì£¼ì°¨ìš”ê¸ˆ</span><span class="arrow"></span></div>
            <div order="1" class="ftDay"><span class="text">ì¼ì£¼ì°¨ìš”ê¸ˆ</span><span class="arrow"></span></div>
            <div order="1" class="ftMon"><span class="text">ì›”ì£¼ì°¨ìš”ê¸ˆ</span><span class="arrow"></span></div>
            <div order="1" class="pkCnt"><span class="text">ì „ì²´ì£¼ì°¨ëŒ€ìˆ˜</span><span class="arrow"></span></div>
        </div>

        <div class="main"></div>  <!-- ë‚´ìš©ì´ ë‚˜ì™€ì•¼í•  ê³³-->

    </div>
    
    <script src="parking.js"></script>
    <script>
        
        //  JSON ë°ì´í„° ì¶œë ¥í•˜ê¸°
        const arr2 = arr.slice(0, 300)
        console.log(arr2)

        const main = document.querySelector('.main')
        arr2.forEach(e => {
            let tag = ''
            tag += `<div class="item">`
            tag += `    <div class="pkNam">${e.pkNam }</div>`
            tag += `    <div class="guNm">${e.guNm }</div>`
            tag += `    <div class="pkFm">${e.pkFm }</div>`
            tag += `    <div class="tenMin">${e.tenMin == '-' ? 0 : e.tenMin}</div>`
            tag += `    <div class="ftDay">${e.ftDay == '-' ? 0 : e.ftDay }</div>`
            tag += `    <div class="ftMon">${e.ftMon == '-' ? 0 : e.ftMon }</div>`
            tag += `    <div class="pkCnt">${e.pkCnt }</div>`
            tag += `</div>`
            main.innerHTML += tag
        })
        


        //  í´ë¦­ì´ë²¤íŠ¸ ì„¤ì •
        const columns = Array.from(document.querySelectorAll('div.columns > div'))  //  ë°°ì—´ë¡œ ë§Œë“¤ê¸°

        //  í´ë¦­ì´ë²¤íŠ¸
        function sortHandler(event) {
   
            //  ë‚´ê°€ í´ë¦­í•œ ëŒ€ìƒì€ columnsì—ì„œ ëª‡ë²ˆì§¸ ì¸ë±ìŠ¤ë¥¼ ê°€ì§€ëŠ”ê°€?
            let target = event.target
            while(target.tagName != 'DIV') {
                target = target.parentNode
            }

            const idx = columns.indexOf(target)
            console.log(idx)        //  idxê°€ -1 ì´ë¼ë©´ ëŒ€ìƒì„ ì°¾ì§€ ëª»í–ˆë‹¤ëŠ” ëœ».


            const order = +target.getAttribute('order')     //  orderê°€ 1ì´ë¼ë©´
            
            target.setAttribute('order', -order)    //  ê·¸ ë‹¤ìŒì€ -1 ì´ ë‚˜ì˜¬ê²ƒì„(ì´ê²ƒì„ ë°˜í™˜í• ë•Œ ê³±í•´ì£¼ë©´ í•¨ìˆ˜ì‹¤í–‰í• ë•Œë§ˆë‹¤ ê°’ì´ ë°”ë€œ)
            
            document.querySelectorAll('span.arrow').forEach(e => e.innerText = '')

            target.querySelector('span.arrow').innerText = order > 0 ? 'ğŸ”º' : 'ğŸ”»'

            const arr3 = Array.from(document.querySelectorAll('div.main > div.item'))

            arr3.sort((e1, e2)=> {
           
                //  ë¬¸ìì—´ì´ ì•„ë‹Œ, ì •ìˆ˜í˜•íƒœë¡œ ë¹„êµí•˜ê² ë‹¤ (+)
                const v1 = +e1.children[idx].innerText   //  ê° ì»¬ëŸ¼ì„ [0] [1] ...  == [idx]
                const v2 = +e2.children[idx].innerText
                
                return (v1 <= v2 ? 1 : -1) * order     //  ê¸°ë³¸ì ìœ¼ë¡œëŠ” ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•´ë‘ê¸°
                
                //  children :  HTMLCollection í˜•íƒœ, index ëŠ” ì¡´ì¬í•¨
                //  ì €ë²ˆì—      +a.querySelector('td:nth-child(2)').innerText ì²˜ëŸ¼
                //  ì›í•˜ëŠ” ì»¬ëŸ¼ì˜ ë°ì´í„°ë§Œ ë½‘ì•„ì˜¬ ìˆ˜ ìˆë„ë¡ í•œë‹¤

            })

            arr3.forEach(e => main.appendChild(e))
            
        }
        columns.slice(3, 7).forEach(e => e.onclick = sortHandler)   //  ì»¬ëŸ¼[3]ë²ˆì§¸ë¶€í„° í´ë¦­ì´ë²¤íŠ¸ ì ìš©



    </script>
</body>
</html>